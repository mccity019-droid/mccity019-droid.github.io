<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù…ØªØ¬Ø± Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(120deg,#0f2027,#203a43,#2c5364);
  color: #fff;
}

header {
  padding: 30px;
  text-align: center;
  background: rgba(0,0,0,0.5);
  box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

header h1 {
  margin: 0;
  font-size: 32px;
}

.login-btn {
  margin-top: 20px;
  padding: 14px 30px;
  background: #5865F2;
  border: none;
  border-radius: 10px;
  font-size: 17px;
  color: #fff;
  cursor: pointer;
}

.container {
  max-width: 1200px;
  margin: 50px auto;
  padding: 0 20px;
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
  gap: 30px;
}

.car {
  background: rgba(255,255,255,0.08);
  border-radius: 20px;
  padding: 15px;
  text-align: center;
  backdrop-filter: blur(8px);
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
}

.car img {
  width: 100%;
  height: 150px;
  object-fit: cover;
  border-radius: 15px;
}

.car h3 {
  margin: 15px 0;
}

.car button {
  padding: 12px 20px;
  border-radius: 10px;
  border: none;
  font-weight: bold;
  background: #00f2fe;
  cursor: pointer;
}

.car button:disabled {
  background: gray;
  cursor: not-allowed;
}
</style>
</head>

<body>

<header>
  <h1>ğŸš— Ù…ØªØ¬Ø± Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙØ±</h1>
  <button class="login-btn" onclick="loginDiscord()">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¯Ø³ÙƒÙˆØ±Ø¯</button>
</header>

<div class="container" id="cars"></div>

<script>
/* ========= Ø¹Ø¯Ù‘Ù„ ÙÙ‚Ø· Ù‡Ù†Ø§ ========= */
const CLIENT_ID = "1462902207329468562";
const REDIRECT_URI = "https://mccity019-droid.github.io/";
const WEBHOOK = "https://discord.com/api/webhooks/1462906362995675269/dpM3M1eBzKaA3839W-2wQJ1KAsN9GfGu-zuvzxKp32ZqyiLG2AAEHDdOqS6JEh7NzfHj";
/* =============================== */

let sent = false;

function loginDiscord() {
  const url =
    `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}` +
    `&redirect_uri=${encodeURIComponent(REDIRECT_URI)}` +
    `&response_type=token&scope=identify`;
  window.location.href = url;
}

function getToken() {
  const hash = window.location.hash;
  if (!hash) return null;
  const params = new URLSearchParams(hash.substring(1));
  return params.get("access_token");
}

async function getUser(token) {
  const res = await fetch("https://discord.com/api/users/@me", {
    headers: { Authorization: `Bearer ${token}` }
  });
  return res.json();
}

const cars = ["A","B","C","D","E","F","G"];
const container = document.getElementById("cars");

cars.forEach(c => {
  const div = document.createElement("div");
  div.className = "car";
  div.innerHTML = `
    <img src="https://via.placeholder.com/400x200?text=Car+${c}">
    <h3>Ø³ÙŠØ§Ø±Ø© ${c}</h3>
    <button onclick="order('${c}',this)">Ø·Ù„Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</button>
  `;
  container.appendChild(div);
});

async function order(car, btn) {
  if (sent) return;
  const token = getToken();
  if (!token) {
    alert("Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„ Ø¯Ø³ÙƒÙˆØ±Ø¯ Ø£ÙˆÙ„Ø§Ù‹");
    return;
  }

  sent = true;
  btn.disabled = true;
  btn.innerText = "ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„";

  const user = await getUser(token);

  await fetch(WEBHOOK,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      embeds:[{
        title:"ğŸš— Ø·Ù„Ø¨ Ø³ÙŠØ§Ø±Ø© Ø¬Ø¯ÙŠØ¯",
        color:3447003,
        fields:[
          { name:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…", value:`${user.username}#${user.discriminator}` },
          { name:"ID", value:user.id },
          { name:"Ø§Ù„Ø³ÙŠØ§Ø±Ø©", value:`Ø³ÙŠØ§Ø±Ø© ${car}` }
        ]
      }]
    })
  });

  alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©");
}
</script>

</body>
</html>
